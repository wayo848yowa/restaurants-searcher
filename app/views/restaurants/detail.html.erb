<% content_for :title, "Ê§úÁ¥¢ÁµêÊûú - „Åê„Çã„ÇÅ„ÅÑ„Å®ÔºÅ" %>

<div class="container">
  <div class="header">
    <h1>„Åê„Çã„ÇÅ„ÅÑ„Å®ÔºÅ</h1>
    <p>Â∫óËàó„Åî„Å®„ÅÆË©≥Á¥∞ÊÉÖÂ†±„Éö„Éº„Ç∏</p>
  </div>

  <% if @restaurants.present? || (@search_params[:lat].present? && @search_params[:lng].present?) %>
    <div class="results-section">
      <div class="results-header">
        <!--<%= link_to "< ", 'javascript:history.back()', class: "btn btn-small" %>Ââç„Éö„Éº„Ç∏„Å´Êàª„Çã-->
         <%= link_to "< ", :back, class: "btn btn-small" %>
        <h2>
          Ê§úÁ¥¢ÁµêÊûú
          <% if @total_count %>
            (<%= @total_count %>‰ª∂)
          <% end %>
        </h2>
        <% if @search_params[:lat].present? && @search_params[:lng].present? %>
          <p>‰ΩçÁΩÆ: <%= @search_params[:lat] %>, <%= @search_params[:lng] %></p>
        <% end %>
      </div>
      
      <div class="results-content">
        <% if @restaurants.present? %>
          <div class="restaurant-grid">
            <% @restaurants.each do |restaurant| %>
              <div class="restaurant-card">
                <% if restaurant[:photo] %>
                  <%= image_tag restaurant[:photo], alt: restaurant[:name], class: "restaurant-image" %>
                <% else %>
                  <div class="restaurant-image-placeholder">
                    <span>No Image</span>
                  </div>
                <% end %>
                
                <div class="restaurant-info">
                  <h3 class="restaurant-name"><%= restaurant[:name] %></h3>
                  
                  <div class="restaurant-detail">
                    <i>üìç</i>
                    <span><%= restaurant[:address] %></span>
                  </div>
                  
                  <% if restaurant[:access] %>
                    <div class="restaurant-detail">
                      <i>üö∂</i>
                      <span><%= restaurant[:access] %></span>
                    </div>
                  <% end %>
                  
                  <% if restaurant[:budget] %>
                    <div class="restaurant-detail">
                      <i>üí∞</i>
                      <span><%= restaurant[:budget] %></span>
                    </div>
                  <% end %>
                  
                  <% if restaurant[:genre] %>
                    <span class="genre-tag"><%= restaurant[:genre] %></span>
                  <% end %>
                  
                  <% if restaurant[:urls] %>
                    <div style="margin-top: 10px;">
                      <%= link_to "Ë©≥Á¥∞„ÇíË¶ã„Çã", restaurant[:urls], target: "_blank", class: "btn btn-small" %>
                    </div>
                  <% end %>
                </div>
              </div>
            <% end %>
          </div>
        <% else %>
          <div class="no-results">
            <p>Ë©≤ÂΩì„Åô„Çã„É¨„Çπ„Éà„É©„É≥„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ</p>
            <p>Ê§úÁ¥¢ÁØÑÂõ≤„ÇíÂ∫É„Åí„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
            <%= link_to "Ê§úÁ¥¢Êù°‰ª∂„ÇíÂ§âÊõ¥„Åô„Çã", restaurants_path, class: "btn" %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>